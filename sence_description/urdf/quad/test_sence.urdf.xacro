<?xml version="1.0"?>
<robot name="sence" xmlns:xacro="http://ros.org/wiki/xacro">


  <!-- Set up some variables and defaults -->
  <xacro:property name="pi" value="3.1415" />

  <material name="silver">
    <color rgba="0.7 0.7 0.7 1"/>
  </material>

  <xacro:macro name="default_inertial" params="mass">
    <inertial>
      <mass value="${mass}" />
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0" />
    </inertial>
  </xacro:macro>

  
  <!-- Define Links-->
  <link name="base_link" />

  <link name="link1">
    <inertial>
        <origin xyz="0.029044932513473305 0.010265080427010284 -0.03814827760382364" rpy="0 0 0"/>
        <mass value="0.15187448298114298"/>
        <inertia ixx="5.3e-05" iyy="6.1e-05" izz="6.9e-05" ixy="-6e-06" iyz="0.0" ixz="0.0"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://test_sence/meshes/base_link.stl" />
        </geometry>
        <material name="silver"/>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://test_sence/meshes/base_link.stl" />
        </geometry>
      </collision>
  </link>

  <link name="link2">
    <inertial>
        <origin xyz="-0.04078394902352935 -0.013231283994066126 0.00021684450055575039" rpy="0 0 0"/>
        <mass value="0.09734685103972182"/>
        <inertia ixx="2.2e-05" iyy="3.6e-05" izz="4e-05" ixy="-2e-06" iyz="0.0" ixz="0.0"/>
      </inertial>
      <visual>
        <origin xyz="-0.01348 -0.002676 0.038139" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://test_sence/meshes/HMMR_Leg_J2_v1_1.stl" />
        </geometry>
        <material name="silver"/>
      </visual>
      <collision>
        <origin xyz="-0.01348 -0.002676 0.038139" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://test_sence/meshes/HMMR_Leg_J2_v1_1.stl" />
        </geometry>
      </collision>
  </link>

  <link name="link3">
    <inertial>
        <origin xyz="-0.06366942125676311 -0.021943300476205383 0.0024103683252244337" rpy="0 0 0"/>
        <mass value="0.1208747488020619"/>
        <inertia ixx="3.4e-05" iyy="0.000102" izz="0.000104" ixy="1.4e-05" iyz="-1e-06" ixz="2e-06"/>
      </inertial>
      <visual>
        <origin xyz="0.020447 -0.009456 0.037939" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://test_sence/meshes/HMMR_Leg_J3_v1_1.stl" />
        </geometry>
        <material name="silver"/>
      </visual>
      <collision>
        <origin xyz="0.020447 -0.009456 0.037939" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://test_sence/meshes/HMMR_Leg_J3_v1_1.stl" />
        </geometry>
      </collision>
  </link>

  <link name="link4">
    <inertial>
        <origin xyz="-0.06827181090766318 0.01066089288586344 0.020893759814543007" rpy="0 0 0"/>
        <mass value="0.052701725493830516"/>
        <inertia ixx="1.8e-05" iyy="7.3e-05" izz="7.2e-05" ixy="1.4e-05" iyz="0.0" ixz="-1e-06"/>
      </inertial>
      <visual>
        <origin xyz="0.085454 0.010544 0.057414" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://test_sence/meshes/HMMR_Leg_J4_v1_1.stl" />
        </geometry>
        <material name="silver"/>
      </visual>
      <collision>
        <origin xyz="0.085454 0.010544 0.057414" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://test_sence/meshes/HMMR_Leg_J4_v1_1.stl" />
        </geometry>
      </collision>
  </link>


  <!-- Define Joints -->
  <joint name="joint0" type="fixed">
    <parent link="base_link"/>
    <child link="link1"/>
    <axis xyz="0 0 1"/>
    <origin xyz="0 0 0"/>
  </joint>

  <joint name="joint1" type="revolute">
    <parent link="link1"/>
    <child link="link2"/>
    <axis xyz="1 0 0"/>
    <origin xyz="0.01348 0.002676 -0.038139" rpy="0 0 0"/>
    <limit upper="4" lower="-4" effort="30" velocity="10"/>
  </joint>

  <joint name="joint2" type="revolute">
    <parent link="link2"/>
    <child link="link3"/>
    <axis xyz="0 1 0"/>
    <origin xyz="-0.033927 0.00678 0.0002" rpy="0 0 0"/>
    <limit upper="1.919862" lower="-1.919862" effort="30" velocity="10"/>
  </joint>

  <joint name="joint3" type="revolute">
    <parent link="link3"/>
    <child link="link4"/>
    <axis xyz="0 0 1"/>
    <origin xyz="-0.065007 -0.02 -0.019475" rpy="0 0 0"/>
    <limit upper="2.356194" lower="-2.268928" effort="30" velocity="10"/>
  </joint>


  <!-- Define Transmissions -->
  <transmission name="joint1_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <actuator name="$joint1_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
    <joint name="joint1">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
  </transmission>

  <transmission name="joint2_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <actuator name="$joint2_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
    <joint name="joint2">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
  </transmission>

  <transmission name="joint3_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <actuator name="$joint3_motor">
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
    <joint name="joint3">
      <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
    </joint>
  </transmission>


  <!-- Gazebo plugin for ROS Control -->
  <gazebo>
    <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
      <robotNamespace>/</robotNamespace>
    </plugin>
  </gazebo>

</robot>
